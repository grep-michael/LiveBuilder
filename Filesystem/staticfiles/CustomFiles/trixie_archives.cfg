#!/bin/bash

echo "P: Fixing /etc/apt/sources.list"

cat > /etc/apt/sources.list << 'SOURCES'
deb http://deb.debian.org/debian/ trixie main contrib non-free non-free-firmware
deb-src http://deb.debian.org/debian/ trixie main contrib non-free non-free-firmware

deb http://deb.debian.org/debian/ trixie-updates main contrib non-free non-free-firmware
deb-src http://deb.debian.org/debian/ trixie-updates main contrib non-free non-free-firmware

deb http://deb.debian.org/debian-security/ trixie-security main contrib non-free non-free-firmware
deb-src http://deb.debian.org/debian-security/ trixie-security main contrib non-free non-free-firmware
SOURCES

echo "P: Updated sources.list:"
cat /etc/apt/sources.list

echo "P: Updating package lists"
apt-get update || {
    echo "E: apt-get update failed"
    exit 1
}

echo "P: Package update completed successfully"